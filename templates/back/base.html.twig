<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}NexusPlay â€¢ Back Office{% endblock %}</title>
        <link rel="stylesheet" href="{{ asset('css/nexusplay.css') }}">
        {% block stylesheets %}
            <style>
                .admin-wrapper {
                    display: flex;
                    min-height: 100vh;
                    background: #020617;
                }

                .admin-sidebar {
                    width: 240px;
                    background: rgba(15, 23, 42, 0.98);
                    padding: 24px 0;
                    position: fixed;
                    inset-block: 0;
                    border-right: 1px solid rgba(148, 163, 184, 0.15);
                    backdrop-filter: blur(22px);
                }

                .admin-sidebar-header {
                    padding: 0 24px 18px;
                    margin-bottom: 8px;
                }

                .admin-sidebar-header h2 {
                    color: #e5e7eb;
                    font-size: 1.25rem;
                    letter-spacing: 0.08em;
                    text-transform: uppercase;
                    margin: 0;
                }

                .admin-sidebar-header h2 span {
                    color: #f97316;
                }

                .admin-sidebar-user {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 16px 24px 20px;
                }

                .admin-sidebar-user span {
                    color: #9ca3af;
                    font-size: 0.8rem;
                }

                .admin-nav {
                    list-style: none;
                    padding: 8px 0 0;
                    margin: 0;
                }

                .admin-nav li a {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 10px 24px;
                    color: #9ca3af;
                    font-size: 0.85rem;
                    text-decoration: none;
                    transition: all 0.2s ease;
                }

                .admin-nav li a:hover,
                .admin-nav li a.active {
                    color: #f9fafb;
                    background: linear-gradient(90deg, rgba(59, 130, 246, 0.25), rgba(129, 140, 248, 0.6));
                }

                .admin-main {
                    flex: 1;
                    margin-left: 240px;
                    padding: 24px 32px 32px;
                }

                .admin-main-inner {
                    max-width: 1280px;
                    margin: 0 auto 32px;
                }

                .admin-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                    padding-bottom: 16px;
                    border-bottom: 1px solid rgba(55, 65, 81, 0.7);
                }

                .admin-header h1 {
                    color: #f9fafb;
                    font-size: 1.4rem;
                    font-weight: 600;
                    letter-spacing: 0.02em;
                }

                .admin-user {
                    display: flex;
                    align-items: center;
                    gap: 14px;
                    color: #9ca3af;
                    font-size: 0.8rem;
                }
            </style>
        {% endblock %}
        {% block javascripts %}
            {% block importmap %}{{ importmap('app') }}{% endblock %}
        {% endblock %}
    </head>
    <body class="np-page np-page--admin">
        {% block body %}
            {% for label, messages in app.flashes %}
                {% for message in messages %}
                    <div class="np-flash np-flash-{{ label }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endfor %}

            {% set current_route = app.request.attributes.get('_route') %}

            <div class="admin-wrapper">
                <aside class="admin-sidebar">
                    <div class="admin-sidebar-header">
                        <h2>NEXUS<span>PLAY</span></h2>
                    </div>
                    <div class="admin-sidebar-user">
                        <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #6b5ce7, #4a9eff); display: flex; align-items: center; justify-content: center; color: #fff; font-weight: bold;">{{ app.user ? app.user.username|first|upper : 'A' }}</div>
                        <div>
                            <div style="color: #fff; font-size: 0.9rem;">{{ app.user ? app.user.username : 'Admin' }}</div>
                            <span>Back office</span>
                        </div>
                    </div>
                    <ul class="admin-nav">
                        {% if is_granted('ROLE_ADMIN') %}
                            <li><a href="{{ path('back_home') }}" class="{{ current_route == 'back_home' ? 'active' : '' }}">ğŸ“Š Dashboard</a></li>
                            <li><a href="{{ path('app_user_back') }}" class="{{ current_route == 'app_user_back' ? 'active' : '' }}">ğŸ‘¥ Users</a></li>
                            <li><a href="{{ path('app_player_back') }}" class="{{ current_route == 'app_player_back' ? 'active' : '' }}">ğŸ® Players</a></li>
                            <li><a href="{{ path('app_coach_back') }}" class="{{ current_route == 'app_coach_back' ? 'active' : '' }}">ğŸ¯ Coaches</a></li>
                            <li><a href="{{ path('app_organization_back') }}" class="{{ current_route == 'app_organization_back' ? 'active' : '' }}">ğŸ¢ Organizations</a></li>
                            <li><a href="{{ path('app_game_back') }}" class="{{ current_route == 'app_game_back' ? 'active' : '' }}">ğŸ•¹ï¸ Games</a></li>
                            <li><a href="{{ path('app_team_back') }}" class="{{ current_route == 'app_team_back' ? 'active' : '' }}">ğŸ‘¥ Teams</a></li>
                            <li><a href="{{ path('app_product_back') }}" class="{{ current_route == 'app_product_back' ? 'active' : '' }}">ğŸ›’ Shop</a></li>
                            <li><a href="{{ path('app_order_back') }}" class="{{ current_route == 'app_order_back' ? 'active' : '' }}">ğŸ“¦ Orders</a></li>
                            <li><a href="{{ path('app_content_back') }}" class="{{ current_route == 'app_content_back' ? 'active' : '' }}">ğŸ“ Content</a></li>
                            <li><a href="{{ path('app_forum_post_back') }}" class="{{ current_route == 'app_forum_post_back' ? 'active' : '' }}">ğŸ’¬ Forum</a></li>
                            <li><a href="{{ path('app_stream_back') }}" class="{{ current_route == 'app_stream_back' ? 'active' : '' }}">ğŸ“º Streams</a></li>
                        {% elseif is_granted('ROLE_ORGANIZATION') %}
                            <li><a href="{{ path('app_organization_back') }}" class="{{ current_route == 'app_organization_back' ? 'active' : '' }}">ğŸ¢ Organization dashboard</a></li>
                            <li><a href="{{ path('app_player_back') }}" class="{{ current_route == 'app_player_back' ? 'active' : '' }}">ğŸ® Players</a></li>
                            <li><a href="{{ path('app_product_back') }}" class="{{ current_route == 'app_product_back' ? 'active' : '' }}">ğŸ›’ Shop products</a></li>
                            <li><a href="{{ path('app_analytics_index') }}">ğŸ“ˆ Analytics</a></li>
                        {% elseif is_granted('ROLE_COACH') %}
                            <li><a href="{{ path('app_coach_back') }}" class="{{ current_route == 'app_coach_back' ? 'active' : '' }}">ğŸ¯ Coaching dashboard</a></li>
                            <li><a href="{{ path('app_content_back') }}" class="{{ current_route == 'app_content_back' ? 'active' : '' }}">ğŸ“ Guides</a></li>
                            <li><a href="{{ path('app_forum_post_back') }}" class="{{ current_route == 'app_forum_post_back' ? 'active' : '' }}">ğŸ’¬ Forum</a></li>
                            <li><a href="{{ path('app_analytics_index') }}">ğŸ“ˆ Analytics</a></li>
                        {% endif %}

                        <li><a href="{{ path('app_logout') }}">ğŸšª Log out</a></li>
                    </ul>
                </aside>

                <main class="admin-main">
                    <div class="admin-main-inner">
                        {% block admin_content %}{% endblock %}
                    </div>
                </main>
            </div>
        {% endblock %}
    </body>
</html>

